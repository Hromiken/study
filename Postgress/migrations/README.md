# **üìò –ö–æ–Ω—Å–ø–µ–∫—Ç: –º–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL –≤ Go**

##  –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏?

**–ú–∏–≥—Ä–∞—Ü–∏–∏** ‚Äî —ç—Ç–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Å–ø–æ—Å–æ–± –∏–∑–º–µ–Ω—è—Ç—å —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö 
(—Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, –ø–æ–ª—è, —Å–≤—è–∑–∏) –ø–æ—à–∞–≥–æ–≤–æ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ.


## –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏?

üìù **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã** ‚Üí –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞–∑–∞–¥ –∏–ª–∏ –Ω–∞–∫–∞—Ç–∏—Ç—å –≤–ø–µ—Ä—ë–¥.

üë®‚Äçüíª **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞** ‚Üí –≤—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

üöÄ **–î–µ–ø–ª–æ–π** ‚Üí –Ω–∞ –ø—Ä–æ–¥–µ –ë–î –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–µ–º–∏ –∂–µ —à–∞–≥–∞–º–∏, —á—Ç–æ –∏ –ª–æ–∫–∞–ª—å–Ω–æ.

üìú **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚Üí –ø–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –∏ –∑–∞—á–µ–º –º–µ–Ω—è–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

‚ö° **–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** ‚Üí –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞—é—Ç –Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã/–ø–æ–ª—è.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏?

–í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö (–∫–∞–∂–¥—ã–π —à–∞–≥ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª).

–í –±–∞–∑–µ –µ—Å—Ç—å —Å–ª—É–∂–µ–±–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (schema_migrations), –≥–¥–µ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–∏—Å–∞ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## *** üì¶ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**

golang-migrate/migrate ‚Üí –¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ Go, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL.

goose ‚Üí –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–∏–π.

gorm-migrate ‚Üí –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ ORM gorm (–º–µ–Ω–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω).

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –º–∏–≥—Ä–∞—Ü–∏–π

–ò–∑–º–µ–Ω–µ–Ω–∏—è –∏–¥—É—Ç –ø–æ—à–∞–≥–æ–≤–æ (–∫–∞–∫ git-commit –¥–ª—è –±–∞–∑—ã).

–ö–∞–∂–¥—ã–π —à–∞–≥ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ up (–≤–ø–µ—Ä—ë–¥) –∏ down (–Ω–∞–∑–∞–¥).

–£–∂–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å ‚Äî —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ.

## –ü–ª—é—Å—ã –º–∏–≥—Ä–∞—Ü–∏–π

‚úÖ –ù–µ—Ç "—Ä–∞–∑—ä–µ—Ö–∞–≤—à–µ–π—Å—è" —Å—Ö–µ–º—ã —É —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

‚úÖ –î–µ–ø–ª–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º.

‚úÖ –ï—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã.

‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.

–ú–∏–Ω—É—Å—ã –º–∏–≥—Ä–∞—Ü–∏–π

‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–µ—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é (up/down).

‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç–∫–∞—Ç—ã.

‚ö†Ô∏è –ï—Å–ª–∏ –∑–∞–±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å.


## üìÇ –ö–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏?

üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

/migrations

‚îú‚îÄ‚îÄ [0001_init.up.sql](./migrations/0001_init.up.sql)     # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã orders

‚îú‚îÄ‚îÄ [0001_init.down.sql](./migrations/0001_init.down.sql)   # –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã orders

/[docker-compose.yml](./docker-compose.yml)         # –ü–æ–¥–Ω—è—Ç–∏–µ postgres + –º–∏–≥—Ä–∞—Ü–∏–π


### üîë –ü—Ä–∞–≤–∏–ª–∞:

–ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ (0001, 0002‚Ä¶) –∏–¥—ë—Ç –ø–æ –ø–æ—Ä—è–¥–∫—É.

up.sql ‚Äî —á—Ç–æ –¥–µ–ª–∞–µ–º –≤–ø–µ—Ä—ë–¥.

down.sql ‚Äî –∫–∞–∫ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º.

–í –±–∞–∑–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è.
