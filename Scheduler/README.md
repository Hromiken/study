# <span style="color:green">GO SCHEDULER</span>

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go (runtime scheduler) —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≥–æ—Ä—É—Ç–∏–Ω.

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω (G) –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ –û–° (M) —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã (P). –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç—ã—Å—è—á–∏ –≥–æ—Ä—É—Ç–∏–Ω –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –¥–æ—Å—Ç—É–ø–Ω—ã–µ CPU.

## ‚ùì –ö–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω?

### <span style="color:orange">1) –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏</span>

<span style="color:Green"> G (goroutine) </span> ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞.

<span style="color:Blue">M (machine) </span>  ‚Äî –ø–æ—Ç–æ–∫ –û–°, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≥–æ—Ä—É—Ç–∏–Ω—ã.

<span style="color:RED">P (processor) </span>  ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä Go, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –≥–æ—Ä—É—Ç–∏–Ω –Ω–∞ M.

üîë –ò—Ç–æ–≥: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–≤—è–∑—ã–≤–∞–µ—Ç G ‚Üí P ‚Üí M, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ª—ë–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ.

### <span style="color:orange">2) –û—á–µ—Ä–µ–¥–∏ –≥–æ—Ä—É—Ç–∏–Ω</span>

–ö–∞–∂–¥—ã–π <span style="color:RED">processor </span>  –∏–º–µ–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å <span style="color:Green"> goroutine </span>.

–ï—Å—Ç—å —Ç–∞–∫–∂–µ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å, –∫—É–¥–∞ –º–æ–≥—É—Ç –ø–æ–ø–∞–¥–∞—Ç—å <span style="color:Green"> goroutine </span> –¥–ª—è –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

–ï—Å–ª–∏ <span style="color:RED">processor </span> –ø—É—Å—Ç—É–µ—Ç, –æ–Ω –º–æ–∂–µ—Ç –∑–∞–±–∏—Ä–∞—Ç—å <span style="color:Green"> goroutine </span> –∏–∑ –æ—á–µ—Ä–µ–¥–µ–π –¥—Ä—É–≥–∏—Ö <span style="color:RED">processor </span> (work stealing).

üîë –ò—Ç–æ–≥: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—Å–µ–≥–¥–∞ —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ CPU –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

### <span style="color:orange">3) M:N –º–æ–¥–µ–ª—å</span>

Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å <span style="color:orange">**M:N –º–æ–¥–µ–ª—å**</span> –º–Ω–æ–≥–æ <span style="color:Green"> goroutine </span> –Ω–∞ –º–µ–Ω—å—à–µ–µ —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ –û–° (<span style="color:Blue">machine</span>).

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ <span style="color:RED">P (processor) </span> = GOMAXPROCS* (—á–∏—Å–ª–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

üîë –ò—Ç–æ–≥: –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã <span style="color:Green">goroutine </span> –Ω–∞ —Å–æ—Ç–Ω—è—Ö –ø–æ—Ç–æ–∫–æ–≤ –û–°, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è –∏—Ö –Ω–∞–ø—Ä—è–º—É—é.

### <span style="color:orange">4) Preemption (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ)</span>

–†–∞–Ω—å—à–µ –¥–ª–∏–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ <span style="color:Green">goroutine </span> –º–æ–≥–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫.

–° Go 1.14 –¥–æ–±–∞–≤–ª–µ–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –º–æ–≥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–ª–≥—É—é <span style="color:Green">goroutine </span> –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –¥—Ä—É–≥—É—é.

üîë –ò—Ç–æ–≥: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∏ –æ–¥–Ω–∞ <span style="color:Green">goroutine </span> –Ω–µ ¬´–∑–∞–≤–∏—Å–Ω–µ—Ç¬ª –Ω–∞–≤—Å–µ–≥–¥–∞, —É–ª—É—á—à–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

### <span style="color:orange">5) –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ syscalls</span>

–ï—Å–ª–∏ <span style="color:Green">goroutine </span> –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ I/O –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–º –≤—ã–∑–æ–≤–µ, <span style="color:Blue">machine</span> –æ—Ç–≤—è–∑—ã–≤–∞–µ—Ç—Å—è, –∞ <span style="color:RED">processor </span>–ø–µ—Ä–µ–¥–∞—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏–º <span style="color:Green">goroutine </span>.

–ö–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–Ω–æ–≤–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç <span style="color:Green">goroutine </span>.

üîë –ò—Ç–æ–≥: —Ä–∞–Ω—Ç–∞–π–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CPU, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ <span style="color:Green">goroutine </span> –∂–¥—É—Ç –¥–∞–Ω–Ω—ã—Ö.

## <span style="color:blue">INTERVIEW</span>



### üîπ –ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç (30 —Å–µ–∫—É–Ω–¥)

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—ã (G) –Ω–∞ –ø–æ—Ç–æ–∫–∏ –û–° (M) —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã (P). –û–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª—å M:N, —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—è–º–∏ –≥–æ—Ä—É—Ç–∏–Ω, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç—ã—Å—è—á–∞–º –≥–æ—Ä—É—Ç–∏–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç preemption, —á—Ç–æ–±—ã –Ω–∏ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

### üîπ –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç (2 –º–∏–Ω—É—Ç—ã)

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å —Ä–∞–Ω—Ç–∞–π–º–∞, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≥–æ—Ä—É—Ç–∏–Ω.

–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:

G (goroutine) ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è,

M (machine) ‚Äî –ø–æ—Ç–æ–∫ –û–°,

P (processor) ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä Go, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –æ—á–µ—Ä–µ–¥—å—é –≥–æ—Ä—É—Ç–∏–Ω –Ω–∞ M.

–ö–∞–∂–¥–∞—è P –∏–º–µ–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å –≥–æ—Ä—É—Ç–∏–Ω, –∞ —Ç–∞–∫–∂–µ –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å. –ï—Å–ª–∏ P –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç, –æ–Ω –º–æ–∂–µ—Ç –∑–∞–±–∏—Ä–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –æ—á–µ—Ä–µ–¥–µ–π (work stealing).

Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å M:N, –ø–æ–∑–≤–æ–ª—è—è –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç—ã—Å—è—á–∏ –≥–æ—Ä—É—Ç–∏–Ω –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ –ø–æ—Ç–æ–∫–æ–≤ –û–°. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ P –∑–∞–¥–∞—ë—Ç—Å—è GOMAXPROCS.

–° Go 1.14 –ø–æ—è–≤–∏–ª–∞—Å—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ª–≥–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω (preemption), —á—Ç–æ–±—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –∑–∞–≤–∏—Å–∞–ª –Ω–∞ –æ–¥–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ.

–ï—Å–ª–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ I/O –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–º –≤—ã–∑–æ–≤–µ, M –æ—Ç–≤—è–∑—ã–≤–∞–µ—Ç—Å—è, –∞ P –ø–µ—Ä–µ–¥–∞—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏–º –≥–æ—Ä—É—Ç–∏–Ω–∞–º. –ö–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ä—É—Ç–∏–Ω–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.

üîë –ò—Ç–æ–≥: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CPU, –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –≥–æ—Ä—É—Ç–∏–Ω –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.